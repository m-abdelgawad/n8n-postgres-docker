#############################################
# Core Service Settings
#############################################
# Public hostname for webhooks and OAuth
N8N_HOST=n8n.automagicdeveloper.com
N8N_PROTOCOL=https
N8N_PORT=5678

# Public URLs - Critical for webhooks and OAuth flows
WEBHOOK_URL=https://n8n.automagicdeveloper.com/
N8N_EDITOR_BASE_URL=https://n8n.automagicdeveloper.com

#############################################
# Database Configuration (PostgreSQL)
#############################################
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres_db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=dbuser
DB_POSTGRESDB_PASSWORD=################## Replace with your actual password
# Connection pool settings for better performance
DB_POSTGRESDB_POOL_SIZE=10

#############################################
# Security & Authentication
#############################################
# Basic Auth for UI access
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=mohamed
N8N_BASIC_AUTH_PASSWORD=################### Replace with your actual password

# Encryption key (32 chars minimum)
N8N_ENCRYPTION_KEY=c6a1819b28b1430c8b47a1d2db90a2e

# Security headers and settings
N8N_SECURE_COOKIE=true

#############################################
# Performance & Stability Settings
#############################################
# WebSocket backend (prevents connection drops) [[2]]
N8N_PUSH_BACKEND=websocket

# Task runners for better workflow execution [[2]]
N8N_RUNNERS_ENABLED=true
N8N_RUNNERS_MODE=auto
N8N_RUNNERS_MAX_CONCURRENCY=5

# Execution settings
EXECUTIONS_PROCESS=main
N8N_CONCURRENCY_PRODUCTION_LIMIT=10

# Memory management
NODE_OPTIONS=--max-old-space-size=2048

#############################################
# Proxy & Network Configuration
#############################################
# Tell n8n it's behind 1 reverse proxy (nginx) [[4]]
N8N_PROXY_HOPS=1

# Trust proxy headers
N8N_TRUST_PROXY=true

#############################################
# Data Management & Persistence
#############################################
# Execution data retention (7 days)
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168

# Binary data handling
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
N8N_BINARY_DATA_TTL=168

# User management folder
N8N_USER_FOLDER=/home/node/.n8n

#############################################
# Logging & Monitoring
#############################################
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console

# Disable telemetry for privacy
N8N_DIAGNOSTICS_ENABLED=false
N8N_ENABLE_TELEMETRY=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false

#############################################
# Environment Settings
#############################################
GENERIC_TIMEZONE=Africa/Cairo
NODE_ENV=production
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

#############################################
# Additional Production Settings
#############################################
# Disable public API if not needed
N8N_PUBLIC_API_DISABLED=true

# Enable metrics endpoint for monitoring
N8N_METRICS=true

# Payload size limits (in MB)
N8N_PAYLOAD_SIZE_MAX=16

# Community nodes
N8N_COMMUNITY_PACKAGES_ENABLED=true

# Error reporting
N8N_HIRING_BANNER_ENABLED=false
